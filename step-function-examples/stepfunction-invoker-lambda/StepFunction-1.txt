{
	"parsedData": {
		"banksData": [{
				"bankName": "SBI",
				"transactionType": "Credit",
				"amount": 123.0
			},
			{
				"bankName": "ICICI",
				"transactionType": "Debit",
				"amount": 123.0
			}
		],
		"stmtsData": [{
				"statementId": "Stmt1",
				"paymentDate": "01012020",
				"amount": 1212.0
			},
			{
				"statementId": "Stmt2",
				"paymentDate": "01022020",
				"amount": 200.0
			}
		]
	}
}

{
	"Comment": "Apply aggregate variable",
  	"StartAt": "AggregateParallel",
  	"States": {
    	"AggregateParallel": {
      		"Type": "Parallel",
      		"OutputPath": "$",
      		"InputPath": "$",
      		"Next": "CollateResults",
      		"ResultSelector": {
      			"BankAggregateResult.$": "$[0].ApplyBankAggregate",
      			"StmtAggregateResult.$": "$[1].ApplyStmtsAggregate"
      		},
      		"Branches": [
        	{
	      		"StartAt": "ApplyBankAggregate",
	      		"States": {
	        		"ApplyBankAggregate": {
	          			"Type": "Task",
	          			"ResultPath": "$.ApplyBankAggregate.Output",
	          			"Resource": "arn:aws:lambda:ap-south-1:376368920129:function:bankdatavariable-aggregate-stack-function-TYI3A5SBGODT",
	          			"Parameters": {
	        				"BankDetails": {
	            				"banksData.$": "$.parsedData.banksData"
	        				}
	    	  			},
	          			"End": true
	        		}
	      		}
        	},
        	{
          		"StartAt": "ApplyStmtsAggregate",
          		"States": {
            		"ApplyStmtsAggregate": {
              			"Type": "Task",
              			"ResultPath": "$.ApplyStmtsAggregate.Output",
              			"Resource": "arn:aws:lambda:ap-south-1:376368920129:function:stmtvariable-aggregate-stack-function-9XCSD0EFQJZT",
              			"Parameters": {
            				"StmtDetails": {
                				"stmtsData.$": "$.parsedData.stmtsData"
            				}
            			},
              			"End": true
            		}
          		}
        	}
      		]
    	},
    	"CollateResults": {
    		"Type": "Task",
    		"Resource": "arn:aws:lambda:ap-south-1:376368920129:function:saveagg-data-stack-function-1IJ3HTV2C2TU5",
    		"Parameters": {
    			"BankAggregate.$": "$.BankAggregateResult.Output",
    			"StmtAggregate.$": "$.StmtAggregateResult.Output"
    		},
    		"ResultPath": "$.CollateResults.Output",
    		"End": true
    	}
  	}
}

Output of CollateResults
{
  "BankAggregate": {
    "aggregatedData": {
      "Debit": 100,
      "Credit": 123
    }
  },
  "StmtAggregate": {
    "aggregatedData": {
      "Debit": 100,
      "Credit": 123
    }
  }
}


